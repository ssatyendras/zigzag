<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link link rel=icon  href="zigzag_logo_white_32x32.svg" />
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ZigZag - Deep Learning Hardware Design Space Exploration: ONNXModelParser Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ZigZag - Deep Learning Hardware Design Space Exploration
   </div>
   <div id="projectbrief">This repository presents the novel version of our tried-and-tested HW Architecture-Mapping Design Space Exploration (DSE) Framework for Deep Learning (DL) accelerators. ZigZag bridges the gap between algorithmic DL decisions and their acceleration cost on specialized accelerators through a fast and accurate HW cost estimation.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classmodel_1_1ONNXModelParser.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classmodel_1_1ONNXModelParser-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ONNXModelParser Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Parse the ONNX model into a workload.  
 <a href="classmodel_1_1ONNXModelParser.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4506d48ed49b02592ca449a46e9feda7"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmodel_1_1ONNXModelParser.html#a4506d48ed49b02592ca449a46e9feda7">__init__</a> (self, <a class="el" href="classmodel_1_1ONNXModelParser.html#a11ca96dc836ddb84fb694554c9e06bf6">onnx_model</a>, <a class="el" href="classmodel_1_1ONNXModelParser.html#a809b5e786240f8de5fbc3ae41d439596">mapping_path</a>)</td></tr>
<tr class="memdesc:a4506d48ed49b02592ca449a46e9feda7"><td class="mdescLeft">&#160;</td><td class="mdescRight">The class constructor.  <a href="classmodel_1_1ONNXModelParser.html#a4506d48ed49b02592ca449a46e9feda7">More...</a><br /></td></tr>
<tr class="separator:a4506d48ed49b02592ca449a46e9feda7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad22709b2e67308af35f55680d5a026e0"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmodel_1_1ONNXModelParser.html#ad22709b2e67308af35f55680d5a026e0">run</a> (self)</td></tr>
<tr class="memdesc:ad22709b2e67308af35f55680d5a026e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run the parser.  <a href="classmodel_1_1ONNXModelParser.html#ad22709b2e67308af35f55680d5a026e0">More...</a><br /></td></tr>
<tr class="separator:ad22709b2e67308af35f55680d5a026e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade99e4499eaf6da42cc6e1cfab009081"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmodel_1_1ONNXModelParser.html#ade99e4499eaf6da42cc6e1cfab009081">parse_workload_from_onnx_model_and_mapping</a> (self)</td></tr>
<tr class="memdesc:ade99e4499eaf6da42cc6e1cfab009081"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts an onnx model into a workload object.  <a href="classmodel_1_1ONNXModelParser.html#ade99e4499eaf6da42cc6e1cfab009081">More...</a><br /></td></tr>
<tr class="separator:ade99e4499eaf6da42cc6e1cfab009081"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a769c2391bd777b1f155714ba645a5b1d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmodel_1_1ONNXModelParser.html#a769c2391bd777b1f155714ba645a5b1d">get_onnx_model</a> (self)</td></tr>
<tr class="separator:a769c2391bd777b1f155714ba645a5b1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ddcb91210ab69851335342f8180068d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmodel_1_1ONNXModelParser.html#a2ddcb91210ab69851335342f8180068d">get_mapping</a> (self)</td></tr>
<tr class="separator:a2ddcb91210ab69851335342f8180068d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5911bec98b0c5d0c449806d39b657ff"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmodel_1_1ONNXModelParser.html#ab5911bec98b0c5d0c449806d39b657ff">get_workload</a> (self)</td></tr>
<tr class="separator:ab5911bec98b0c5d0c449806d39b657ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a97dafa0abf570a51215e42a10a40fef8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmodel_1_1ONNXModelParser.html#a97dafa0abf570a51215e42a10a40fef8">onnx_model_path</a></td></tr>
<tr class="separator:a97dafa0abf570a51215e42a10a40fef8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11ca96dc836ddb84fb694554c9e06bf6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmodel_1_1ONNXModelParser.html#a11ca96dc836ddb84fb694554c9e06bf6">onnx_model</a></td></tr>
<tr class="separator:a11ca96dc836ddb84fb694554c9e06bf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a809b5e786240f8de5fbc3ae41d439596"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmodel_1_1ONNXModelParser.html#a809b5e786240f8de5fbc3ae41d439596">mapping_path</a></td></tr>
<tr class="separator:a809b5e786240f8de5fbc3ae41d439596"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11b0ac7d8e498ccae82b0dd1d92ae163"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmodel_1_1ONNXModelParser.html#a11b0ac7d8e498ccae82b0dd1d92ae163">mapping</a></td></tr>
<tr class="separator:a11b0ac7d8e498ccae82b0dd1d92ae163"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5f1d395e50b6a04e0052c6c9125b897"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmodel_1_1ONNXModelParser.html#af5f1d395e50b6a04e0052c6c9125b897">workload</a></td></tr>
<tr class="separator:af5f1d395e50b6a04e0052c6c9125b897"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Parse the ONNX model into a workload. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a4506d48ed49b02592ca449a46e9feda7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4506d48ed49b02592ca449a46e9feda7">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None __init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>onnx_model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mapping_path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The class constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">onxx_model</td><td></td></tr>
    <tr><td class="paramname">mapping_path</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2ddcb91210ab69851335342f8180068d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ddcb91210ab69851335342f8180068d">&#9670;&nbsp;</a></span>get_mapping()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def get_mapping </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a769c2391bd777b1f155714ba645a5b1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a769c2391bd777b1f155714ba645a5b1d">&#9670;&nbsp;</a></span>get_onnx_model()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def get_onnx_model </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab5911bec98b0c5d0c449806d39b657ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5911bec98b0c5d0c449806d39b657ff">&#9670;&nbsp;</a></span>get_workload()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def get_workload </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ade99e4499eaf6da42cc6e1cfab009081"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade99e4499eaf6da42cc6e1cfab009081">&#9670;&nbsp;</a></span>parse_workload_from_onnx_model_and_mapping()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def parse_workload_from_onnx_model_and_mapping </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts an onnx model into a workload object. </p>
<p>We scan the model for all convolutional layers, and setup a Layer object for each of those using the mapping. Then we combine the layers into a workload graph.</p>
<p>If the model isn't in the format with external data, it will be slow to manipulate it, so better to work with raw models with external data The line below accomplishes this. onnx.save_model(model, 'model_external.onnx', save_as_external_data=True, all_tensors_to_one_file=True, location='model_external_raw_data', size_threshold=1024, convert_attribute=False)</p>
<p>In the future, assume we will have a model saved with external data, then we have to execute the code below if the model isn't inferred yet</p>
<p>This approach is faster for large models because the raw model is used (w/o the external data) if model is not inferred: onnx.shape_inference.infer_shapes_path('path/to/the/model.onnx') # This will save the inferred model to the same file model = onnx.load('path/to/the/model.onnx') # reload the inferred model</p>
<p>Saves for each node_id the inputs and outputs tensor names </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classmodel_1_1ONNXModelParser_ade99e4499eaf6da42cc6e1cfab009081_icgraph.png" border="0" usemap="#aclassmodel_1_1ONNXModelParser_ade99e4499eaf6da42cc6e1cfab009081_icgraph" alt=""/></div>
<map name="aclassmodel_1_1ONNXModelParser_ade99e4499eaf6da42cc6e1cfab009081_icgraph" id="aclassmodel_1_1ONNXModelParser_ade99e4499eaf6da42cc6e1cfab009081_icgraph">
<area shape="rect" title="Converts an onnx model into a workload object." alt="" coords="352,5,556,47"/>
<area shape="rect" href="classmodel_1_1ONNXModelParser.html#ad22709b2e67308af35f55680d5a026e0" title="Run the parser." alt="" coords="261,13,304,39"/>
<area shape="rect" href="classzigzag_1_1classes_1_1stages_1_1Stage_1_1Stage.html#a45163c19b7c87f553c6f1d055d4668cb" title=" " alt="" coords="5,5,213,47"/>
</map>
</div>

</div>
</div>
<a id="ad22709b2e67308af35f55680d5a026e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad22709b2e67308af35f55680d5a026e0">&#9670;&nbsp;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def run </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run the parser. </p>
<ul>
<li>parse the onnx_model_path into an onnx model</li>
<li>parse the mapping_path into a mapping dict</li>
<li>iterate through the onnx model and generate the workload consisting of LayerNodes and DummyNodes </li>
</ul>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classmodel_1_1ONNXModelParser_ad22709b2e67308af35f55680d5a026e0_cgraph.png" border="0" usemap="#aclassmodel_1_1ONNXModelParser_ad22709b2e67308af35f55680d5a026e0_cgraph" alt=""/></div>
<map name="aclassmodel_1_1ONNXModelParser_ad22709b2e67308af35f55680d5a026e0_cgraph" id="aclassmodel_1_1ONNXModelParser_ad22709b2e67308af35f55680d5a026e0_cgraph">
<area shape="rect" title="Run the parser." alt="" coords="5,78,48,105"/>
<area shape="rect" href="namespaceutils.html#af9fdc0a51acbe1b72752cc975cc15b8f" title="Parse the input accelerator residing in accelerator_path." alt="" coords="121,5,275,47"/>
<area shape="rect" href="namespaceutils.html#a6edbae5d5968ca50b3452e632d7c4787" title=" " alt="" coords="109,71,287,112"/>
<area shape="rect" href="classmodel_1_1ONNXModelParser.html#ade99e4499eaf6da42cc6e1cfab009081" title="Converts an onnx model into a workload object." alt="" coords="96,136,300,177"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classmodel_1_1ONNXModelParser_ad22709b2e67308af35f55680d5a026e0_icgraph.png" border="0" usemap="#aclassmodel_1_1ONNXModelParser_ad22709b2e67308af35f55680d5a026e0_icgraph" alt=""/></div>
<map name="aclassmodel_1_1ONNXModelParser_ad22709b2e67308af35f55680d5a026e0_icgraph" id="aclassmodel_1_1ONNXModelParser_ad22709b2e67308af35f55680d5a026e0_icgraph">
<area shape="rect" title="Run the parser." alt="" coords="261,13,304,39"/>
<area shape="rect" href="classzigzag_1_1classes_1_1stages_1_1Stage_1_1Stage.html#a45163c19b7c87f553c6f1d055d4668cb" title=" " alt="" coords="5,5,213,47"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a11b0ac7d8e498ccae82b0dd1d92ae163"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11b0ac7d8e498ccae82b0dd1d92ae163">&#9670;&nbsp;</a></span>mapping</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mapping</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a809b5e786240f8de5fbc3ae41d439596"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a809b5e786240f8de5fbc3ae41d439596">&#9670;&nbsp;</a></span>mapping_path</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mapping_path</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a11ca96dc836ddb84fb694554c9e06bf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11ca96dc836ddb84fb694554c9e06bf6">&#9670;&nbsp;</a></span>onnx_model</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">onnx_model</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a97dafa0abf570a51215e42a10a40fef8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97dafa0abf570a51215e42a10a40fef8">&#9670;&nbsp;</a></span>onnx_model_path</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">onnx_model_path</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af5f1d395e50b6a04e0052c6c9125b897"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5f1d395e50b6a04e0052c6c9125b897">&#9670;&nbsp;</a></span>workload</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">workload</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/runner/work/zigzag/zigzag/zigzag/classes/io/onnx/<a class="el" href="model_8py.html">model.py</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacemodel.html">model</a></li><li class="navelem"><a class="el" href="classmodel_1_1ONNXModelParser.html">ONNXModelParser</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
